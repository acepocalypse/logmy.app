/* style.css */

:root {
  --page-bg: #F8FCFB;
  --content-bg: #FFFFFF;
  --text-primary: #333333;
  --text-secondary: #777777;
  --accent-primary: #6892D5;
  --accent-primary-hover: #577ABF;
  --accent-secondary: #79D1C3;
  --accent-secondary-hover: #63B9A9;
  --success-bg: #C9FDD7;
  --success-text: #2A7556;
  --error-color: #D32F2F;
  --error-bg: #FEECEB;
  --border-color: #DCE0E6;
  --input-bg: #FFFFFF;
  --input-focus-border: var(--accent-primary); /* For consistent focus on inputs */
  --input-focus-shadow: color-mix(in srgb, var(--accent-primary) 20%, transparent); /* For consistent focus shadow */
  --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --border-radius: 6px;
  --grid-cell-line-height: 1.4; /* Define line height for grid cells for consistency */
  --grid-cell-max-lines: 2;    /* Define max lines for grid cells */
  --grid-header-bg: color-mix(in srgb, var(--page-bg) 50%, var(--content-bg)); /* Slightly different bg for header/filters */
}

body {
  font-family: var(--font-family-sans);
  background-color: var(--page-bg);
  color: var(--text-primary);
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem 2rem 1rem;
  line-height: 1.6;
}

#app-header {
  background-color: var(--content-bg);
  padding: 0.75rem 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 1000;
  width: 100%;
  box-sizing: border-box;
  left: 0;
  right: 0;
  max-width: 1200px; /* Ensure header also respects max-width */
  margin: 0 auto; /* Center header */
}

.logo-container {
  display: flex;
  align-items: center;
}

#header-logo {
  height: 32px;
  width: 32px;
  margin-right: 0.75rem;
}

.app-name-header {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--accent-primary);
}

#app-header nav a {
  margin-left: 1.5rem;
  text-decoration: none;
  color: var(--text-secondary);
  font-weight: 500;
  padding-bottom: 0.25rem;
  border-bottom: 2px solid transparent;
  transition: color 0.2s ease-in-out, border-bottom-color 0.2s ease-in-out;
}

#app-header nav a:hover {
  color: var(--accent-primary);
}

#app-header nav a.active {
  color: var(--accent-primary);
  border-bottom-color: var(--accent-primary);
  font-weight: 600;
}

main {
  padding-top: 1rem;
}

#main-title.hidden {
  display: none;
}

h1 {
  text-align: center;
  margin-bottom: 2.5rem;
  font-size: 2.5rem;
  font-weight: 600;
  color: var(--accent-primary);
  margin-top: 0;
}

h2 {
  font-size: 1.75rem;
  font-weight: 500;
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 0.5rem;
  margin-top: 1rem;
  margin-bottom: 1.5rem;
  color: var(--text-primary);
}

section {
  background-color: var(--content-bg);
  padding: 1.5rem 2rem;
  border-radius: var(--border-radius);
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  margin-bottom: 2rem;
}

input[type="email"],
input[type="password"],
input[type="text"],
input[type="date"],
textarea,
select {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  box-sizing: border-box;
  font-size: 1rem;
  background-color: var(--input-bg);
  color: var(--text-primary);
  transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

textarea {
  line-height: 1.4;
  min-height: 80px;
}

label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--text-secondary);
}

button {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  background-color: var(--accent-primary);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  text-align: center;
  transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

button.secondary {
  background-color: var(--accent-secondary);
}

#auth-section button,
#confirm-form button[type="submit"],
#input-section button {
  width: 100%;
}

#auth-section {
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 2rem;
}
#auth-section h2 {
  text-align: center;
  border-bottom: none;
  margin-bottom: 1.5rem;
}

#sheet-section h2 {
  margin-bottom: 1rem;
}
.sheet-actions {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  align-items: center; /* Align items vertically */
}
.sheet-actions button {
  width: auto;
}

#account-section {
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}
#account-section h2 {
  text-align: center;
  border-bottom: none;
  margin-bottom: 1.5rem;
}
.account-details p {
  font-size: 1.1rem;
  margin-bottom: 1rem;
  padding: 0.75rem;
  background-color: var(--page-bg);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
}
.account-details p strong {
  color: var(--text-primary);
}
#logout-btn {
  background-color: var(--error-color);
  width: auto;
  display: block;
  margin-left: auto;
  margin-right: auto;
  padding: 0.75rem 2rem;
  margin-top: 1.5rem;
}

.message {
  margin-top: 1rem;
  padding: 0.75rem 1rem;
  border-radius: var(--border-radius);
  text-align: center;
  min-height: 1.2em; /* Ensure space even if empty */
  font-weight: 500;
  border: 1px solid transparent;
  box-sizing: border-box;
  transition: opacity 0.3s ease-in-out, background-color 0.3s ease-in-out;
}
.message:empty {
    /* opacity: 0; */
}
.message.success {
  background-color: var(--success-bg);
  color: var(--success-text);
  border-color: color-mix(in srgb, var(--success-text) 30%, transparent);
}
.message.error {
  background-color: var(--error-bg);
  color: var(--error-color);
  border-color: color-mix(in srgb, var(--error-color) 30%, transparent);
}
.message.neutral {
  background-color: color-mix(in srgb, var(--accent-secondary) 20%, var(--content-bg));
  color: var(--text-primary);
  border-color: var(--accent-secondary);
}

.hidden {
  display: none !important;
}

/* --- AG Grid Specific Styles --- */

/* Default AG Grid cell styling */
.ag-theme-quartz .ag-cell {
    display: flex;
    align-items: center; /* Vertically center content */
    /* For the delete button column, we'll add horizontal centering */
}
.ag-theme-quartz .ag-cell[col-id="id"] { /* Target action column specifically for delete button */
    justify-content: center; /* Horizontally center the button in its cell */
}


/* Style for cell content: limit text to two lines and allow horizontal scrolling */
.ag-theme-quartz .ag-cell-value {
  white-space: normal;
  line-height: var(--grid-cell-line-height);
  max-height: calc(var(--grid-cell-line-height) * var(--grid-cell-max-lines) * 1em);
  overflow-y: hidden;
  overflow-x: auto;   /* This enables horizontal scroll WITHIN the cell if content overflows */
  padding-right: 8px;
  box-sizing: border-box;
}

/* Ensure header text can also wrap if needed and looks good */
.ag-theme-quartz .ag-header-cell-label {
    white-space: normal !important;
    text-overflow: ellipsis;
    overflow: hidden;
    line-height: var(--grid-cell-line-height);
    padding-top: 4px;
    padding-bottom: 4px;
}
.ag-theme-quartz .ag-header-row { /* Style for the entire header row */
    background-color: var(--grid-header-bg);
}
.ag-theme-quartz .ag-header-cell { /* Style for individual header cells */
    border-right: 1px solid var(--border-color); /* Add subtle separator */
}
.ag-theme-quartz .ag-header-cell:last-child {
    border-right: none; /* Remove separator from the last header cell */
}


/* Style for Floating Filter Row inputs to make them more elegant */
.ag-theme-quartz .ag-floating-filter-input input,
.ag-theme-quartz .ag-floating-filter-button { /* Also style filter button if present */
    font-family: var(--font-family-sans);
    font-size: 0.9rem; /* Slightly smaller font for filters */
    padding: 0.4rem 0.6rem;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    background-color: var(--input-bg);
    color: var(--text-primary);
    width: 100%; /* Make input take full width of its container */
    box-sizing: border-box;
    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    height: auto; /* Let padding define height */
    min-height: 30px; /* Ensure a minimum tap height */
}

.ag-theme-quartz .ag-floating-filter-input input:focus {
    border-color: var(--input-focus-border) !important;
    box-shadow: 0 0 0 3px var(--input-focus-shadow) !important;
    outline: none !important; /* Ensure global outline removal doesn't get overridden by AG Grid */
}

.ag-theme-quartz .ag-floating-filter-button {
    background-color: transparent;
    border: none;
    color: var(--text-secondary);
    padding: 0.4rem;
    cursor: pointer;
}
.ag-theme-quartz .ag-floating-filter-button:hover {
    color: var(--accent-primary);
}

.ag-theme-quartz .ag-floating-filter-body { /* Container for the input */
    padding: 0 4px; /* Add some padding around the filter input within its cell */
}
.ag-theme-quartz .ag-header-cell-comp-wrapper .ag-floating-filter { /* The entire filter row */
    background-color: var(--grid-header-bg);
    border-top: 1px solid var(--border-color); /* Separator line above filters */
}


.delete-row-btn {
  background-color: var(--error-color) !important;
  color: white !important;
  border: none;
  border-radius: var(--border-radius);
  padding: 0.4rem 0.8rem; /* Adjusted padding for a slightly better feel */
  font-size: 1rem;  /* Slightly larger icon/text */
  line-height: 1;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
  width: auto;
  margin: 0;
  display: inline-flex; /* Helps with centering icon if it's an SVG or font icon */
  align-items: center;
  justify-content: center;
  /* vertical-align: middle; /* display:flex on parent cell handles this */
}
.delete-row-btn:hover {
  background-color: color-mix(in srgb, var(--error-color) 80%, black) !important;
  transform: scale(1.05); /* Slight scale effect on hover */
}
.delete-row-btn:active {
    transform: scale(0.95); /* Slight shrink effect on click */
}

.grid-link {
    color: var(--accent-primary);
    text-decoration: underline;
    display: inline-block;
    padding: 2px 0;
    word-break: break-all; /* Ensure long URLs break and wrap if needed */
}
.grid-link:hover {
    color: var(--accent-primary-hover);
}


/* --- Diagnostic Fix for "White Square Pop-up" (Focus Styles) --- */
*:focus,
*:focus-visible {
  outline: none !important;
}

/* Custom focus styles for form elements for better accessibility and UX */
input[type="email"]:focus,
input[type="password"]:focus,
input[type="text"]:focus,
input[type="date"]:focus,
textarea:focus,
select:focus {
  border-color: var(--input-focus-border) !important;
  box-shadow: 0 0 0 3px var(--input-focus-shadow) !important;
}

button:focus {
  /* background-color: var(--accent-primary-hover) !important; */ /* Handled by specific button types or general hover */
  box-shadow: 0 0 0 3px var(--input-focus-shadow) !important;
}
button:not(.delete-row-btn):focus { /* Apply hover style on focus for non-delete buttons */
    background-color: var(--accent-primary-hover) !important;
}
button.secondary:focus {
  background-color: var(--accent-secondary-hover) !important;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-secondary) 30%, transparent) !important;
}

#logout-btn:focus {
  background-color: color-mix(in srgb, var(--error-color) 70%, black) !important;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--error-color) 30%, transparent) !important;
}

#app-header nav a:focus {
  color: var(--accent-primary) !important;
  box-shadow: 0 2px 0 0 var(--accent-primary) inset !important;
}

/* AG Grid specific focus - ensure it doesn't interfere or add back unwanted outlines */
.ag-theme-quartz .ag-cell-focus {
    /* Default AG Grid focus can be a bit strong.
       You can customize it or remove it if your cell content has its own focus indication (e.g., inputs) */
    /* border: 1px solid var(--input-focus-border) !important; */ /* Example: match input focus */
    /* box-shadow: 0 0 0 2px var(--input-focus-shadow) !important; */
    border-color: transparent !important; /* Remove AG Grid's default cell focus border if not desired */
    background-color: color-mix(in srgb, var(--accent-primary) 8%, transparent) !important; /* Subtle background on focused cell */
}

/* Ensure the grid itself doesn't have unwanted horizontal scrollbars
   if the sum of minWidths of columns is less than or equal to the grid container width.
   This is mostly controlled by JS (flex, minWidth) but CSS can ensure container behaves.
*/
#myGrid {
    width: 100%;
    overflow-x: hidden; /* Prevent horizontal scroll on the main grid container if columns fit */
                         /* AG Grid should handle internal scrolling of content if needed */
}
